"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var n="undefined"!=typeof globalThis&&globalThis||window,s="object"===("undefined"==typeof chrome?"undefined":_typeof(chrome))&&chrome&&chrome.runtime&&chrome||"object"===("undefined"==typeof browser?"undefined":_typeof(browser))&&browser||{},e=s.runtime.getURL("PATH").replace("/PATH",""),r=s.runtime.id,o=e.startsWith("safari-web-extension://");function a(r,a){s.tabs.query({url:r.matches},function(e){for(var t=0;t<e.length;t++){var n=e[t],o=n.url||"";o&&!o.startsWith("https://")&&!o.startsWith("http://")||o.startsWith("https://chrome.google.com/webstore")||(n=n.id,s.scripting?s.scripting.executeScript({target:{tabId:n},files:[a]}):s.tabs.executeScript(n,{file:a,runAt:r.runAt}))}})}function t(){browserStorage.sync.get(["toolbarIcon","toolbarIconDarkMode"]).then(function(e){var t=o&&n.matchMedia?n.matchMedia("(prefers-color-scheme: dark)").matches:e.toolbarIconDarkMode;algBasics.setActionIcon(e.toolbarIcon,t)})}function i(e){e(),s.runtime.onStartup&&s.runtime.onStartup.addListener(e)}function c(){o||s.storage.local.get(null,function(e){e=Object.keys(e).filter(function(e){return"legacySfgDisplayed"!==e&&"algCustomShortcutsDatabase"!==e&&!e.startsWith("cj_landing_")&&!e.startsWith(algBasics.cachePrefix)});0<e.length&&browserStorage.local.remove(e)}),webextFlags.no_sync_settings?s.storage.sync.clear():configHandler.cleanupSettings()}"undefined"!=typeof document&&(document.body.textContent=""),webextFlags.enterprise_domains?algBasics.getEnterpriseData().then(function(e){i(function(){e&&e.toolbarIconUrl?algBasics.setActionIconUrl(e.toolbarIconUrl):algBasics.setActionIcon("app_launcher_square")})}):i(t),webextFlags.disable_landing_page||cjLanding({websitePath:webextFlags.cj_landing_path,updateBadge:!0,handleTrigger:!0,noUpdateNotice:o}),webextFlags.modify_google_applauncher&&function(){var e=s.runtime.getManifest().content_scripts;if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];if(!Array.isArray(n.js))return;var o="/scripts/cs-applauncher.js",r="/scripts/cs-ogsframe.js";-1!==n.js.indexOf(o)?a(n,o):-1!==n.js.indexOf(r)&&a(n,r)}}(),webextFlags.answer_settings_request&&s.runtime.onMessageExternal.addListener(function(e,t,n){if(-1!==["aiekbiaglgnfojebpkemjkgaofkhfodf","jegfmclagmheobcjojbiohjekamkpbeb","odhlcadbopildpgohnmnknegjdnnpehl","ponjkmladgjfjgllmhnkhgbgocdigcjm"].indexOf(t.id)){if(!e.isImportSettingsCapable)return e.importSettings&&browserStorage.sync.get(algBasics.supportedStorageKeys).then(function(e){n({settingsData:e||{}})}),!0;n({isImportSettingsCapable:!0})}}),c(),s.runtime.onMessage.addListener(function(e,t){var n,o;t.id===r&&"self"===e.forward&&(o=e.targetFrame,s.tabs.sendMessage(t.tab.id,e.data,n=o||0===o?{frameId:o}:n))})}();