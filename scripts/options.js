"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var s,L="object"===("undefined"==typeof chrome?"undefined":_typeof(chrome))&&chrome&&chrome.runtime&&chrome||"object"===("undefined"==typeof browser?"undefined":_typeof(browser))&&browser||{},c="object"===_typeof(L.i18n)&&"function"==typeof L.i18n.getMessage&&L.i18n,e=L.runtime.getURL("PATH").replace("/PATH",""),t=e.startsWith("moz-extension://"),B=e.startsWith("safari-web-extension://"),n=window.location,M=webextFlags.support_advanced_display_settings,x=webextFlags.support_advanced_shortcut_settings,S=!webextFlags.disable_launchbox_and_settings,N=webextFlags.support_display_settings_button,A=!webextFlags.disable_shortcut_suggestions,D=webextFlags.gsuite_apps_support&&!webextFlags.gsuite_apps_enforced,T=webextFlags.support_small_icons,O=B?["gsa_nobg"]:webextFlags.custom_action_icons,P="choice"===webextFlags.modify_google_applauncher&&!B,F=!1,z=null,R=!1,i=-1!==n.search.indexOf("standalone=1")||window.innerWidth===window.screen.width||B,U=Array.isArray(O)&&0<O.length;t?document.documentElement.classList.add("alg-style-flag--firefox"):B&&document.documentElement.classList.add("alg-style-flag--safari");var q,o,l,r,d,u,g,p="popularity",H=["customServicesDatabase","customShortcutsDatabase1","customShortcutsDatabase2","customShortcutsDatabase3","displayMarketplaceApps","displayMode","hideLabel","iconBreak","noFocusTab","noFocusActiveTab","openInCurrentTab","openInNewTabChrome","shortcutIconSize","showLaunchbox","hideSuggestions","showSettings","userList","autoListRemoved","toolbarIcon","toolbarIconDarkMode","gbwaConfig"],m=cjgShortcuts.list,h={},W={},f=[],_=Object.keys(m),v=algBasics.disallowedlist;algBasics.limitAbove&&_.forEach(function(e){(0|e)>algBasics.limitAbove&&v.push(e)});var V=cjgShortcuts.defaultSelection;function b(t){var e=document.createElement("button");e.type="button",e.className="ccc-ibtn",t.onClick&&e.addEventListener("click",function(e){t.onClick(e)});var n,a,s,s=(n=t.iconName,a="http://www.w3.org/2000/svg",(s=document.createElementNS(a,"svg")).setAttribute("xmlns",a),s.setAttribute("class","ccc-icon ccc-ibtn__icon"),s.setAttribute("aria-hidden","true"),s.setAttribute("focusable","false"),s.setAttribute("viewBox","0 0 24 24"),s.setAttribute("height","24"),s.setAttribute("width","24"),(a=document.createElementNS(a,"path")).setAttribute("d",cjgIcons.getGIcon(n)),s.appendChild(a),s);return e.appendChild(s),e}function C(e){return e.metaKey||e.ctrlKey||e.altKey}function y(e){return((t=e).key?" "===t.key||"Spacebar"===t.key:31===(t.keyCode||t.which))||((e=e).key?"Enter"===e.key:13===(e.keyCode||e.which));var t}function I(e){return e.key?"ArrowUp"===e.key||"Up"===e.key:38===(e.keyCode||e.which)}function j(e){return e.key?"ArrowDown"===e.key||"Down"===e.key:40===(e.keyCode||e.which)}function w(e){return e.key?"Escape"===e.key||"Esc"===e.key:27===(e.keyCode||e.which)}function k(e){return e.key?"Tab"===e.key:9===(e.keyCode||e.which)}function G(e,t,n,o){var a=document.createElement("span");a.className="alg-utility-wrapper";var l=document.createElement("div");l.className="ccc-menu ccc-menu--open-inline-end ccc-menu--align-block",a.appendChild(l);var r=[],s=0,d=0,u=!1,g=b({iconName:e});g.addEventListener("mousedown",v),g.addEventListener("keydown",function(e){if(!C(e))if(k(e))p();else{if(u&&w(e))p();else if(y(e))v();else if(j(e))u?r[0].focus():v();else{if(!I(e))return;r[d-1].focus()}e.preventDefault()}}),g.classList.add("ccc-tooltip__trigger"),g.setAttribute("aria-haspopup","menu"),g.setAttribute("aria-expanded","false"),a.appendChild(g);var c,i,n=(c=t,i=n,e=g,t="ref-tooltip-"+Math.random().toString().replace(".",""),(n=document.createElement("div")).className="ccc-tooltip",n.setAttribute("role","tooltip"),n.textContent=algBasics.getI18nMessage(c,i),n.id=t,e.classList.add("ccc-tooltip__trigger"),e.setAttribute("aria-labelledby",t),n);function p(){for(u=!1,g.setAttribute("aria-expanded","false"),g.classList.remove("ccc-ibtn--open"),l.classList.remove("ccc-menu--open"),l.removeAttribute("role"),l.removeEventListener("click",m),l.removeEventListener("focusout",h),setTimeout(function(){document.activeElement||g.focus()});r.length;){var e=r.pop();e.removeEventListener("click",_),e.removeEventListener("keydown",f)}setTimeout(function(){l.textContent=""},250)}function m(){g.focus()}function h(e){l.contains(e.relatedTarget)||p()}function f(e){if(!C(e))if(k(e))p();else{if(I(e))(this.previousSibling||r[d-1]).focus();else if(j(e))(this.nextSibling||r[0]).focus();else if(w(e))p();else{if(!y(e))return;this.click(),p()}e.preventDefault()}}function _(e){var t=s;(s=(new Date).getTime())-t<100&&e.preventDefault()}function v(e){if(u)p();else{u=!0;var t=o();d=t.length;for(var n,a,s,c,i=0;i<d;i++)n=t[i],c=s=a=void 0,a=n[2],s="function"==typeof a&&a,(c=document.createElement("div")).tabIndex=-1,s?c.addEventListener("click",s):(c.rel="noopener","string"!=typeof(c.href=a)||a.startsWith("/")||(c.target="_blank"),c.addEventListener("click",_)),c.setAttribute("role","menuitem"),c.className="ccc-item",c.textContent=algBasics.getI18nMessage(n[0],n[1]),c.addEventListener("keydown",f),l.appendChild(c),r.push(c);l.addEventListener("click",m),l.addEventListener("focusout",h),g.setAttribute("aria-expanded","true"),g.classList.add("ccc-ibtn--open"),l.classList.add("ccc-menu--open"),l.setAttribute("role","menu"),setTimeout(function(){r[0].focus()})}}return a.appendChild(n),a}function K(e){var t,n=e.target,a=u.dataset.shortcutId;u.parentNode===l&&(u.classList.add("cj-shortcutlist__item--alreadyadded"),u.classList.remove("cj-shortcutlist__item--dragging"),(u=ge(a)).classList.add("cj-shortcutlist__item--dragging")),(n=n===d?l:n)===l||n===o?n.appendChild(u):(n=-1!==(e=(t=n.parentNode)===o?V:_).indexOf(a)&&e.indexOf(a)<e.indexOf(n.dataset.shortcutId)?n.nextSibling:n,t.insertBefore(u,n)),oe()}function Q(e,t){se(0|e.shortcutIconSize);var n=algBasics.parseUserlist(e.userList);n&&(V=n),f=algBasics.handleTemporaryShortcuts(V,e.autoListRemoved,m),h=algBasics.joinCustomShortcutsDatabase([t,e]),Object.keys(m).forEach(function(e){var t=m[e],n=t.name||"",a=(t.u||t.url||"").replace("/"," ").replace("."," ").replace("#"," ")+" "+n,s="cj_i18n_"+t.i,s=algBasics.getI18nMessage(s,n);s&&n!==s&&(a+=" "+s,t.name=s);s=t.subId&&t.subId!==e&&m[t.subId];s&&((e=s.name)!==n&&(a+=" "+e),s="cj_i18n_"+s.i,(s=algBasics.getI18nMessage(s,e))&&s!==e&&(a+=" "+s)),-1!==a.indexOf("covid")?a+=" coronavirus":-1!==a.indexOf("corona")&&(a+=" covid"),t.query=a.toLowerCase()}),fe(),setTimeout(function(){he(!0)},50)}function Z(){return"ref-input-"+(Date.now()+Math.random()).toString(36).replace(".","_")}function E(e,t){return(0|t)<(0|e)?-1:1}function a(e,t){var n=(h[e]||m[e]).name||"",a=(h[t]||m[t]).name||"",n=n.toLowerCase(),a=a.toLowerCase();return n===a?e<t?-1:1:a<n?1:-1}function X(e,t){var n=m[e].name.toLowerCase(),a=m[t].name.toLowerCase();return n===a?E(e,t):a<n?1:-1}function Y(e,t){var n,a;return 5e3<e?n=-1*e:-1===(n=cjgShortcuts.mostPopular.indexOf(e))&&(n=5e3),5e3<t?a=-1*t:-1===(a=cjgShortcuts.mostPopular.indexOf(t))&&(a=5e3),n<a?-1:a<n?1:X(e,t)}function J(e){return configHandler.cleanupSettings(e).then(function(e){algBasics.setActionIcon(e.toolbarIcon,e.toolbarIconDarkMode),e=we({message:algBasics.getI18nMessage("cj_i18n_01663","Settings have been imported successfully."),actionElements:[be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01664","Reload settings page"),onClick:function(){n.reload()}})]}),q.appendChild(e)})}function $(e){configHandler.importSettings(e).then(J,ke)}function ee(){var e={};e[algBasics.cachePrefix+"iconDataCache"]=W,browserStorage.local.set(e)}function te(){var e={};algBasics.splitCustomShortcutsDatabase(h,e),browserStorage.sync.set(e)}function ne(e){delete h[e],delete W[e]}function ae(){browserStorage.sync.get(H).then(configHandler.exportSettings)}function se(e){e=(s=!(e=e)||40<e?48:24)<20;l.classList.toggle("cj-shortcutlist--condensed",e),o.classList.toggle("cj-shortcutlist--condensed",e);e=40<s;l.classList.toggle("cj-shortcutlist--grid",e),o.classList.toggle("cj-shortcutlist--grid",e)}function ce(e){se(e);e=!(e=e)||40<e?64:!T||20<e?32:16;browserStorage.sync.setItem("shortcutIconSize",e)}function ie(){algBasics.saveUserListWithRemovals(V)}function oe(){V=[];for(var e=0;e<o.children.length;e++)V.push(o.children[e].dataset.shortcutId);ie()}function le(){V.sort(a),fe(),ie()}function re(e){var t=cjgShortcuts.getUrl(e);if(t)return t;e=h[e]||m[e];return e.url||e.u}function de(e){var t=e.target,n=re(t.dataset.shortcutId),e=e.dataTransfer;e.setData("text/uri-list",n),e.setData("text/plain",n);n=t.parentNode;n===o&&d.classList.add("alg-selectshortcuts__shortcuts--remove"),n!==o&&n!==l||(u=t,setTimeout(function(){t.classList.add("cj-shortcutlist__item--dragging")}))}function ue(e){u.classList.remove("cj-shortcutlist__item--dragging"),u=null,d.classList.remove("alg-selectshortcuts__shortcuts--remove"),e.preventDefault()}function ge(t){var e=h[t]||m[t],n=algBasics.createShortcutItem(e,{customIconDataCache:W,customShortcutsDatabase:h,size:s,sourceSize:48,draggable:!0},t);function a(){var e;n.parentNode===l?(n.classList.add("cj-shortcutlist__item--alreadyadded"),e=ge(t),o.appendChild(e),oe(),e=e.offsetHeight+e.offsetTop-r.offsetHeight,r.scrollTop<e&&(r.scrollTop=e)):t in h?xe(t):n.parentNode===o&&(n.remove(),oe(),pe())}return t in h?(n.classList.add("cj-shortcutlist__item--edit"),n.title=algBasics.getI18nMessage("cj_i18n_01761","Edit shortcut")):n.title=re(t)||e.name||"",n.addEventListener("click",a),n.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(a(),e.preventDefault())}),n}function pe(){for(var e=l.children,t=0;t<e.length;t++){var n=e[t],a=n.dataset.shortcutId,a=-1!==V.indexOf(a);n.classList.toggle("cj-shortcutlist__item--alreadyadded",a)}}function me(e,t,n){var a=ge(n),s=m[n],s=s.query||s.name||"",n=-1!==V.indexOf(n),e=-1===s.toLowerCase().indexOf(e);a.classList.toggle("cj-shortcutlist__item--noquerymatch",e),a.classList.toggle("cj-shortcutlist__item--alreadyadded",n),t.appendChild(a)}function he(e){l.textContent="",l.remove();var t={popularity:Y,alphabetically:X,newest:E},n=g.value.toLowerCase(),a=Object.keys(m).filter(function(e){return-1===v.indexOf(e)&&-1===f.indexOf(e)}).sort(t[p]);if(e){for(var s=0;s<30;s++)me(n,l,a.shift());setTimeout(function(){var t=document.createDocumentFragment();a.forEach(function(e){me(n,t,e)}),l.appendChild(t)})}else a.forEach(function(e){me(n,l,e)});d.appendChild(l)}function fe(){o.textContent="",o.remove();for(var e=0;e<V.length;e++){var t=V[e];(t in m||t in h)&&(t=ge(t),o.appendChild(t))}r.appendChild(o)}function _e(e){var t=document.createElement("input");return t.type="text",t.className="md2-textinput alg-pref-popup__textinput",t.placeholder=e.label,t.size=40,t}function ve(e){var t=document.createElement("button");t.type="button";var n=["ccc-button"];return e.fill?n.push("ccc-button--fill"):e.hairline&&n.push("ccc-button--outline"),e.color&&n.push("ccc-button--color"),t.className=n.join(" "),t.textContent=e.label,e.onClick&&t.addEventListener("click",e.onClick),t}function be(e){return e.fill||(e.hairline=!0),e.color=!0,ve(e)}function Ce(n){var e=Z(),t=ve(n);t.classList.add("ccc-button--select","alg-pref-item__appended-action");var a=document.createTextNode("...");t.appendChild(a);var s=document.createElement("select");s.className="ccc-button__select",s.id=e,s.addEventListener("change",function(){a.textContent=s.selectedOptions[0].textContent,n.onChange(s.value)});var c="object"===_typeof(n.options)&&Object.keys(n.options);c&&0<c.length&&(c.forEach(function(e){var t=document.createElement("option");t.textContent=n.options[e],t.value=e,s.appendChild(t)}),a.textContent=n.options[c[0]]),t.appendChild(s);var i=t;return n.prefItem&&((i=document.createElement("div")).className="alg-pref-item",(c=document.createElement("label")).textContent=n.settingsLabel,c.htmlFor=e,i.appendChild(c),i.appendChild(t)),Object.defineProperty(i,"algPrefValue",{set:function(e){s.value=e,setTimeout(function(){s.selectedOptions[0]&&(a.textContent=s.selectedOptions[0].textContent)})},get:function(){return s.value}}),i}function ye(e){var t=document.createElement("div");t.className="alg-pref-item";var n=document.createElement("div");n.className="ccc-switch",t.appendChild(n);var a=Z(),s=document.createElement("input");s.type="checkbox",s.className="ccc-switch__input",s.id=a,s.addEventListener("click",function(){e.onChange(s.checked)}),n.appendChild(s);var c=document.createElement("label");c.className="ccc-switch__switch",c.htmlFor=a,n.appendChild(c);c=document.createElement("label");return c.className="ccc-switch__label",c.textContent=e.label,c.htmlFor=a,n.appendChild(c),Object.defineProperty(t,"algPrefChecked",{set:function(e){s.checked=e},get:function(){return s.checked}}),t}function Ie(e){var t=document.createElement("h3");return t.className="alg-pref-mainheader",t.textContent=e.label,t}function je(e){var t=document.createElement("p");return t.className="alg-pref-paragraph",t.textContent=e.label,t}function we(e){var t=document.createElement("div");t.className="alg-pref-popupwrapper";var n,a=document.createElement("div");a.className="alg-pref-popup",t.appendChild(a),e.title&&((n=document.createElement("h3")).className="alg-pref-popup__header",n.textContent=e.title,a.appendChild(n)),e.message&&((n=document.createElement("p")).className="alg-pref-popup__message",n.textContent=e.message,a.appendChild(n)),e.additionalFragment&&a.appendChild(e.additionalFragment);var s=document.createElement("div");return s.className="alg-pref-popup__controls",a.appendChild(s),e.actionElements.forEach(function(e){s.appendChild(e)}),window.addEventListener("keyup",function(e){"Escape"===e.key&&t.remove()}),t}function ke(){var e=we({title:algBasics.getI18nMessage("cj_i18n_01736","Import failed"),message:algBasics.getI18nMessage("cj_i18n_01735","Make sure you are importing a proper configuration file."),actionElements:[be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01616","Close"),onClick:function(){e.remove()}})]});q.appendChild(e)}function Ee(){var n=we({title:algBasics.getI18nMessage("cj_i18n_01655","Import settings"),message:algBasics.getI18nMessage("cj_i18n_01661","Warning: importing settings removes the current settings!"),actionElements:[be({label:algBasics.getI18nMessage("cj_i18n_01659","Cancel"),onClick:function(){n.remove()}}),be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01662","Choose file"),onClick:function(){var t,e;t=$,(e=document.createElement("input")).type="file",e.addEventListener("change",function(e){t(e.target.files[0])}),e.click(),n.remove()}})]});q.appendChild(n)}function Le(){var e=we({title:algBasics.getI18nMessage("cj_i18n_01950","Reset settings"),message:algBasics.getI18nMessage("cj_i18n_01951","This will restore all settings and shortcut selections to their original defaults."),actionElements:[be({label:algBasics.getI18nMessage("cj_i18n_01659","Cancel"),onClick:function(){e.remove()}}),be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01950","Reset settings"),onClick:function(){algBasics.setActionIcon(null),browserStorage.sync.clear().then(function(){return configHandler.cleanupSettings()}).then(function(){n.reload()})}})]});q.appendChild(e)}function Be(){var e=we({title:algBasics.getI18nMessage("cj_i18n_01632","Remove all shortcuts"),message:algBasics.getI18nMessage("cj_i18n_06380","Are you sure you want to permanently remove all shortcuts?"),actionElements:[be({label:algBasics.getI18nMessage("cj_i18n_01659","Cancel"),onClick:function(){e.remove()}}),be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01632","Remove all shortcuts"),onClick:function(){e.remove(),V=[],h={},W={},o.textContent="",pe(),ie(),te(),ee()}})]});q.appendChild(e)}function Me(t){var n=we({title:algBasics.getI18nMessage("cj_i18n_01667","Remove custom shortcut"),message:algBasics.getI18nMessage("cj_i18n_01668","Are you sure you want to permanently delete this shortcut?"),actionElements:[be({label:algBasics.getI18nMessage("cj_i18n_01659","Cancel"),onClick:function(){n.remove()}}),be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01669","Remove shortcut"),onClick:function(){n.remove();var e=document.querySelector('.cj-shortcutlist__item[data-shortcut-id="'+t+'"]');e.parentNode===o&&o.removeChild(e),ne(t),oe()}})]});q.appendChild(n)}function xe(e){var n=e||(1e4*Date.now()+Math.round(1e4*Math.random())).toString(36),t=document.createDocumentFragment(),a=document.createElement("label");a.className="alg-pref-popup__label",a.textContent=algBasics.getI18nMessage("cj_i18n_01990","Name");var s=_e({label:algBasics.getI18nMessage("cj_i18n_01674","Shortcut name")});a.appendChild(s),t.appendChild(a);var c=document.createElement("label");c.className="alg-pref-popup__label",c.textContent=algBasics.getI18nMessage("cj_i18n_01672","Url");var i=_e({label:algBasics.getI18nMessage("cj_i18n_01954","https://example.com/")});c.appendChild(i),t.appendChild(c);a=document.createElement("label");a.hidden=B,a.className="alg-pref-popup__label",a.textContent=algBasics.getI18nMessage("cj_i18n_01673","Icon url (optional)");var o=_e({label:algBasics.getI18nMessage("cj_i18n_01955","https://example.com/img.png")});a.appendChild(o),t.appendChild(a);c=[be({label:algBasics.getI18nMessage("cj_i18n_01659","Cancel"),onClick:function(){l.remove()}}),be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01363","Save"),onClick:function(){var t,e;-1===V.indexOf(n)&&V.push(n),ie(),t=n,e={name:s.value,url:i.value,iconUrl:o.value},(e=algBasics.cleanCustomShortcutData(e))?(h[t]=e,fe(),te(),getUrlIcon(e.url,e.iconUrl).then(function(e){e&&"object"===_typeof(e)&&(W[t]=e,fe(),ee())})):ne(t),l.remove()}})];n in h&&(a=h[n],c.splice(1,0,be({label:algBasics.getI18nMessage("cj_i18n_01666","Remove"),onClick:function(){l.remove(),Me(n)}})),a.name&&(s.value=a.name),a.url&&(i.value=a.url),a.iconUrl&&(o.value=a.iconUrl));var l=we({title:e?algBasics.getI18nMessage("cj_i18n_01952","Edit custom shortcut"):algBasics.getI18nMessage("cj_i18n_01633","Add custom shortcut"),additionalFragment:t,actionElements:c});q.appendChild(l)}function Se(e){var t;u.parentNode===o&&(d.classList.remove("alg-selectshortcuts__shortcuts--remove"),(t=u.dataset.shortcutId)in h?Me(t):(o.removeChild(u),oe(),(t=l.querySelector('.cj-shortcutlist__item[data-shortcut-id="'+t+'"]'))&&t.classList.remove("cj-shortcutlist__item--alreadyadded")),e.preventDefault())}function Ne(t){try{L.tabs.create({url:t})}catch(e){window.open(t,"_blank","noopener")}}function Ae(){document.body.textContent="",c&&(document.documentElement.dir=c.getMessage("@@bidi_dir")||"ltr",document.documentElement.lang=(c.getMessage("@@ui_locale")||"en").replace("_","-")),document.title=algBasics.getI18nMessage("cj_i18n_00298","Settings")+" - "+L.runtime.getManifest().name;var E=document.createDocumentFragment();(q=document.createElement("main")).className="alg-pref-main",q.appendChild(Ie({label:algBasics.getI18nMessage("cj_i18n_01624","Select shortcuts")})),i?document.documentElement.classList.add("alg-style-flag--full-page"):((a=b({iconName:"open_in_new",onClick:function(){Ne("/views/options.html?standalone=1"),setTimeout(function(){window.close()})}})).classList.add("alg-fullscreenbutton"),q.appendChild(a)),q.appendChild(je({label:algBasics.getI18nMessage("cj_i18n_01626","You can use drag and drop to add, remove and re-order shortcuts")})),(l=document.createElement("ul")).className="cj-shortcutlist cj-shortcutlist--fill cj-shortcutlist--parentwidth";var e=document.createElement("div");e.className="alg-selectshortcuts alg-selectshortcuts--available",q.appendChild(e);var t=document.createElement("div");t.className="alg-selectshortcuts__appbar",e.appendChild(t);var n=b({iconName:"arrow_back",onClick:function(){document.documentElement.classList.remove("alg-style-flag--noscroll"),e.classList.remove("alg-selectshortcuts--open")}});n.classList.add("alg-selectshortcuts__compactonly"),t.appendChild(n);var a=document.createElement("h2");a.className="alg-selectshortcuts__title",a.textContent=algBasics.getI18nMessage("cj_i18n_01625","Available"),t.appendChild(a);n=Ce({color:!0,hairline:!0,options:{popularity:algBasics.getI18nMessage("cj_i18n_01627","Popular"),alphabetically:algBasics.getI18nMessage("cj_i18n_01990","Name"),newest:algBasics.getI18nMessage("cj_i18n_01629","Newest")},onChange:function(e){p=e,he()}});n.classList.add("alg-selectshortcuts__dropdown"),t.appendChild(n);a=document.createElement("div");a.className="alg-selectshortcuts__searchcontainer",t.appendChild(a);n=b({iconName:"search"});n.classList.add("alg-selectshortcuts__searchicon"),a.appendChild(n),(g=document.createElement("input")).type="search",g.autofocus=i,g.className="md2-textinput alg-selectshortcuts__searchbox",g.placeholder=algBasics.getI18nMessage("cj_i18n_00085","Search"),g.addEventListener("input",function(){!function(){for(var e=g.value.toLowerCase(),t=l.children,n=0;n<t.length;n++){var a=t[n],s=a.dataset.shortcutId,s=m[s],s=-1===(s.query||s.name||"").toLowerCase().indexOf(e);a.classList.toggle("cj-shortcutlist__item--noquerymatch",s)}}()}),a.appendChild(g),(d=document.createElement("div")).className="alg-selectshortcuts__shortcuts",e.appendChild(d),d.appendChild(l),(o=document.createElement("ul")).className="cj-shortcutlist cj-shortcutlist--fill cj-shortcutlist--parentwidth cj-shortcutlist--showhidden",o.addEventListener("dragstart",de),o.addEventListener("dragend",ue),o.addEventListener("dragenter",K);t=document.createElement("div");t.className="alg-selectshortcuts",q.appendChild(t);n=document.createElement("div");n.className="alg-selectshortcuts__appbar",t.appendChild(n);a=document.createElement("h2");a.className="alg-selectshortcuts__title",a.textContent=algBasics.getI18nMessage("cj_i18n_01630","My shortcuts"),n.appendChild(a);a=be({label:algBasics.getI18nMessage("cj_i18n_01631","Sort A-Z"),onClick:le});n.appendChild(a);a=G("more_vert","cj_i18n_00047","More",function(){return[["cj_i18n_01632","Remove all shortcuts",Be]]});a.classList.add("alg-selectshortcuts__more"),n.appendChild(a),(r=document.createElement("div")).className="alg-selectshortcuts__shortcuts",t.appendChild(r),r.appendChild(o),r=o.parentNode,(d=l.parentNode).dataset.removeLabel=algBasics.getI18nMessage("cj_i18n_01669","Remove shortcut"),d.addEventListener("drop",Se),d.addEventListener("dragover",function(e){e.preventDefault()}),d.addEventListener("dragstart",de),d.addEventListener("dragend",ue);n=document.createElement("div");n.className="alg-selectshortcuts__appbar alg-selectshortcuts__footer",e.appendChild(n);a=be({outline:!0,label:algBasics.getI18nMessage("cj_i18n_01634","Suggest missing"),onClick:function(){Ne("https://docs.google.com/forms/d/e/1FAIpQLScpidZZwUPgOjvxmxTPuXpbUWqaRa6Qui1N6U3UQbBTiIsohA/viewform")}});n.appendChild(a);a=be({outline:!0,label:algBasics.getI18nMessage("cj_i18n_01633","Add custom shortcut"),onClick:function(){xe()}});a.classList.add("alg-selectshortcuts__compactonly"),n.appendChild(a);a=be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_00301","Done"),onClick:function(){document.documentElement.classList.remove("alg-style-flag--noscroll"),e.classList.remove("alg-selectshortcuts--open")}});a.classList.add("alg-selectshortcuts__compactonly"),n.appendChild(a);a=document.createElement("div");a.className="alg-selectshortcuts__appbar alg-selectshortcuts__footer",t.appendChild(a);t=be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01633","Add custom shortcut"),onClick:function(){xe()}});t.classList.add("alg-selectshortcuts__fullonly"),a.appendChild(t);t=be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_todo","Add shortcut"),onClick:function(){document.documentElement.classList.add("alg-style-flag--noscroll"),e.classList.add("alg-selectshortcuts--open"),g.select()}});t.classList.add("alg-selectshortcuts__compactonly"),a.appendChild(t);t=document.createElement("link");t.rel="stylesheet",t.href="/styles/options-delayed.css",document.head.appendChild(t),document.body.appendChild(q),setTimeout(function(){var n,a,s,c,i,o,l,r,e,t,d,u,g;E.appendChild(Ie({label:algBasics.getI18nMessage("cj_i18n_05388","General")})),P&&(n=Ce({color:!0,hairline:!0,prefItem:!0,settingsLabel:algBasics.getI18nMessage("cj_i18n_06301","Google App Launcher behaviour"),options:{override:algBasics.getI18nMessage("cj_i18n_06302","Override button and launcher"),launcheronly:algBasics.getI18nMessage("cj_i18n_06303","Only override launcher"),hide:algBasics.getI18nMessage("cj_i18n_06304","Hide button"),leave:algBasics.getI18nMessage("cj_i18n_06305","Don't override")},onChange:function(e){browserStorage.sync.setItem("gbwaConfig",e)}}),E.appendChild(n)),D&&(a=ye({label:algBasics.getI18nMessage("cj_i18n_06695","Display Workspace Marketplace apps"),onChange:function(e){browserStorage.sync.setItem("displayMarketplaceApps",e)}}),E.appendChild(a)),S&&(s=ye({label:algBasics.getI18nMessage("cj_i18n_01640","Display search and launchbox"),onChange:function(e){browserStorage.sync.setItem("showLaunchbox",e)}}),E.appendChild(s)),N&&(c=ye({label:algBasics.getI18nMessage("cj_i18n_01641","Display settings button"),onChange:function(e){browserStorage.sync.setItem("showSettings",e)}}),E.appendChild(c)),A&&(i=ye({label:algBasics.getI18nMessage("cj_i18n_06650","Display shortcut suggestions"),onChange:function(e){browserStorage.sync.setItem("hideSuggestions",!e)}}),E.appendChild(i)),(M||x)&&E.appendChild(Ie({label:algBasics.getI18nMessage("cj_i18n_01642","Appearance")})),M&&(o=Ce({prefItem:!0,hairline:!0,color:!0,settingsLabel:algBasics.getI18nMessage("cj_i18n_01643","Shortcuts display mode:"),options:{grid:algBasics.getI18nMessage("cj_i18n_01644","Auto"),horizontal:algBasics.getI18nMessage("cj_i18n_01645","Horizontal"),vertical:algBasics.getI18nMessage("cj_i18n_01646","Vertical"),custom:algBasics.getI18nMessage("cj_i18n_01647","Custom")},onChange:function(e){l.hidden="custom"!==e,browserStorage.sync.setItem("displayMode",e)}}),E.appendChild(o),(l=document.createElement("div")).className="alg-pref-item",l.hidden=!0,E.appendChild(l),e=Z(),(t=document.createElement("label")).textContent=algBasics.getI18nMessage("cj_i18n_01648","Choose how many columns you want to display:"),t.htmlFor=e,l.appendChild(t),(r=document.createElement("input")).min=1,r.max=25,r.step=1,r.type="number",r.className="md2-textinput alg-pref-item__appended-action",r.id=e,r.addEventListener("keyup",function(){r.validity.valid?browserStorage.sync.set({iconBreak:Number(r.value)}):browserStorage.sync.remove("iconBreak")}),l.appendChild(r));var p,m=ye({label:algBasics.getI18nMessage("cj_i18n_01650","Display shortcuts in a list"),onChange:function(n){setTimeout(function(){var e=n?32:64;ce(e);var t=document.querySelector(".alg-pref-iconsizes__item--selected"),e=document.querySelector('.alg-pref-iconsizes__item[data-size="'+e+'"]');t&&t.classList.remove("alg-pref-iconsizes__item--selected"),e&&e.classList.add("alg-pref-iconsizes__item--selected"),he(),fe()},10)}});x&&(d=ye({label:algBasics.getI18nMessage("cj_i18n_01649","Hide labels"),onChange:function(e){browserStorage.sync.setItem("hideLabel",e),m.hidden=e,u.hidden=!e}}),E.appendChild(d)),m.hidden=!x,E.appendChild(m),x&&((u=document.createElement("div")).hidden=!0,E.appendChild(u),(I=document.createElement("label")).textContent=algBasics.getI18nMessage("cj_i18n_01651","Shortcut icon size"),u.appendChild(I),(g=document.createElement("div")).className="alg-pref-iconsizes",u.appendChild(g),p=T?{16:16,32:32,48:64}:{24:32,48:64},Object.keys(p).forEach(function(e){var t=p[e],n=document.createElement("div");n.className="alg-pref-iconsizes__item",n.dataset.size=t,n.addEventListener("click",function(){var e=document.querySelector(".alg-pref-iconsizes__item--selected");e&&e.classList.remove("alg-pref-iconsizes__item--selected"),n.classList.add("alg-pref-iconsizes__item--selected"),ce(t),m.algPrefChecked=t<48,setTimeout(function(){he(),fe()})});var a=document.createElement("div");a.className="alg-pref-iconsizes__illustration",a.style.height=e+"px",a.style.width=e+"px",a.textContent=e,n.appendChild(a),g.appendChild(n)})),E.appendChild(Ie({label:algBasics.getI18nMessage("cj_i18n_06922","Shortcut behaviour")}));var h=ye({label:algBasics.getI18nMessage("cj_i18n_06921","Focus existing tab if shortcut is already open"),onChange:function(e){browserStorage.sync.setItem("noFocusActiveTab",!e)}});E.appendChild(h);var f=ye({label:algBasics.getI18nMessage("cj_i18n_01636","Open shortcuts in a new tab"),onChange:function(e){e=!e;C.hidden=e,_.hidden=e||!R,browserStorage.sync.setItem("openInCurrentTab",e)}});E.appendChild(f);var _=ye({label:algBasics.getI18nMessage("cj_i18n_06920","Do not focus newly created tabs"),onChange:function(e){browserStorage.sync.setItem("noFocusTab",e)}});_.hidden=!0,_.classList.add("alg-pref-item--secondary"),E.appendChild(_);var v,b,C=ye({label:algBasics.getI18nMessage("cj_i18n_01637","Open shortcuts in a new tab on the Browser New Tab Page"),onChange:function(e){browserStorage.sync.setItem("openInNewTabChrome",e)}});function y(){v.textContent="",[null].concat(O).forEach(function(e){e=function(t){var n=document.createElement("img");n.className="alg-pref-actionicons__item",t===z&&n.classList.add("alg-pref-actionicons__item--selected");var e=t||webextFlags.default_action_icon,a=algBasics.getActionIconVariant(e,F);return n.src="/images/action/"+e+"/"+a+"-19.svg",n.addEventListener("click",function(){var e=n.parentNode.querySelector(".alg-pref-actionicons__item--selected");e&&e.classList.remove("alg-pref-actionicons__item--selected"),n.classList.add("alg-pref-actionicons__item--selected"),browserStorage.sync.setItem("toolbarIcon",t),z=t,algBasics.setActionIcon(z,F)}),n}(e);v.appendChild(e)})}C.hidden=!0,C.classList.add("alg-pref-item--secondary"),E.appendChild(C),U&&(E.appendChild(Ie({label:algBasics.getI18nMessage("cj_i18n_01652","Toolbar icon")})),b=ye({label:algBasics.getI18nMessage("cj_i18n_01788","Adapt toolbar icon for dark theme"),onChange:function(e){F=e,y(),algBasics.setActionIcon(z,F),v.classList.toggle("alg-pref-actionicons--darkmode",F),browserStorage.sync.setItem("toolbarIconDarkMode",F)}}),B&&(b.hidden=!0),E.appendChild(b),(v=document.createElement("div")).className="alg-pref-actionicons",E.appendChild(v),y()),E.appendChild(Ie({label:algBasics.getI18nMessage("cj_i18n_01653","Manage settings")})),E.appendChild(je({label:algBasics.getI18nMessage("cj_i18n_01654","Settings are saved automatically and are synced via extension sync if extension sync for extensions is enabled.")}));var I=document.createElement("div");I.className="alg-pref-buttonrow",E.appendChild(I),I.appendChild(be({label:algBasics.getI18nMessage("cj_i18n_01950","Reset settings"),onClick:Le})),I.appendChild(be({label:algBasics.getI18nMessage("cj_i18n_01655","Import settings"),onClick:Ee})),B||I.appendChild(be({label:algBasics.getI18nMessage("cj_i18n_01656","Export settings"),onClick:ae}));var j=document.createElement("div");function w(n){L.runtime.sendMessage(n,{isImportSettingsCapable:!0},function(e){!L.runtime.lastError&&e&&e.isImportSettingsCapable&&j.appendChild(be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_06398","Import settings from Shortcuts for Google™"),onClick:function(){var e,t;e=n,t=we({title:algBasics.getI18nMessage("cj_i18n_06398","Import settings from Shortcuts for Google™"),message:algBasics.getI18nMessage("cj_i18n_01661","Warning: importing settings removes the current settings!"),actionElements:[be({label:algBasics.getI18nMessage("cj_i18n_01659","Cancel"),onClick:function(){t.remove()}}),be({fill:!0,label:algBasics.getI18nMessage("cj_i18n_01655","Import settings"),onClick:function(){L.runtime.sendMessage(e,{importSettings:!0},function(e){J(e.settingsData)}),t.remove()}})]}),q.appendChild(t)}}))})}j.style.marginTop="8px",I.appendChild(j),w("abekajjnoelgfclhinpadoipocjhjceh"),w("baohinapilmkigilbbbcccncoljkdpnd");var k=browserStorage.local.get(["algCustomShortcutsDatabase",algBasics.cachePrefix+"iconDataCache"]);k.then(function(e){W=e[algBasics.cachePrefix+"iconDataCache"]||{}}),browserStorage.sync.get(H).then(function(t){k.then(function(e){Q(t,e)}),R=t.noFocusTab,!0!==t.openInCurrentTab&&(f.algPrefChecked=!0,C.hidden=!1,R&&(_.hidden=!1,_.algPrefChecked=!0)),!0!==t.noFocusActiveTab&&(h.algPrefChecked=!0),U&&(t.toolbarIcon||t.toolbarIconDarkMode)&&(t.toolbarIconDarkMode&&(F=!0,b.algPrefChecked=!0,v.classList.add("alg-pref-actionicons--darkmode")),t.toolbarIcon&&(z=t.toolbarIcon),y()),t.openInNewTabChrome&&(C.algPrefChecked=!0),D&&(t.displayMarketplaceApps?a.algPrefChecked=!0:B&&(a.hidden=!0)),n&&(n.algPrefValue=t.gbwaConfig||"override");var e=Number(t.shortcutIconSize)||64;(e=!T&&e<32?32:e)<48&&(m.hidden=!1,m.algPrefChecked=!0),x&&(m.hidden=!1,m.algPrefChecked=e<48,(e=g.querySelector('.alg-pref-iconsizes__item[data-size="'+e+'"]'))&&e.classList.add("alg-pref-iconsizes__item--selected"),t.hideLabel&&(d.algPrefChecked=!0,m.hidden=!0,u.hidden=!1)),c&&!1!==t.showSettings&&(c.algPrefChecked=!0),i&&!0!==t.hideSuggestions&&(i.algPrefChecked=!0),S&&(s.algPrefChecked=!1!==t.showLaunchbox),N&&(c.hidden=!1),M&&("custom"===t.displayMode&&(l.hidden=!1),isNaN(t.iconBreak)||(r.value=t.iconBreak),o.algPrefValue=t.displayMode||"grid"),q.appendChild(E),L.storage.onChanged.addListener(function(e,t){"sync"===t&&e.userList&&e.userList.newValue&&e.userList.newValue.join(",")!==V.join(",")&&(V=e.userList.newValue,he(),fe())})})})}window.addEventListener("load",function(){setTimeout(Ae,10)})}();