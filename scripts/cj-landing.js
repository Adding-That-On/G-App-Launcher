"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cjLanding(o){var i,n="undefined"!=typeof globalThis&&globalThis||window,a="object"===("undefined"==typeof chrome?"undefined":_typeof(chrome))&&chrome&&chrome.runtime&&chrome||"object"===("undefined"==typeof browser?"undefined":_typeof(browser))&&browser||{},t=a.action||a.browserAction||a.pageAction,r=a.notifications,c="object"===_typeof(a.i18n)&&"function"==typeof a.i18n.getMessage&&a.i18n,s=a.runtime.getURL("PATH/").replace("/PATH/","").startsWith("safari-web-extension://"),u=a.runtime.getManifest(),d=u.version,e=u.browser_action||u.action,l=e&&e.default_popup,e=(o.origin||"https://apps.jeurissen.co")+"/"+(o.websitePath||"")+"/",f=e+"installed",p=e+"whatsnew?installed=1",_=o.updateBadge,g=864e5*(o.passiveActionButton?1.5:4.5);function b(){i&&(i=null,v(p),a.storage.local.remove("cj_landing_lastupdated"),o.onExecute&&o.onExecute(),_&&(t.onClicked.removeListener(b),l&&m(l),!0===_&&t.setBadgeText({text:""})))}function m(e){t.setPopup({popup:e||""})}function y(e){e=e.split(".");return e[0]+"."+e[1]}function j(e){n.open(e,"_blank","noopener")}function v(e){if(e){if("object"===_typeof(a.tabs))try{return void a.tabs.create({url:e},function(){a.runtime.lastError&&j(e)})}catch(e){}j(e)}}function h(e,n){return e&&c&&c.getMessage(e)||n||""}function w(){r.create("cj_landing_update_notification",{type:"basic",requireInteraction:!0,title:h("cj_i18n_06288","__app_name__ has been updated").replace("__app_name__",u.name),message:h("cj_i18n_06287","Click to view changelog"),iconUrl:function(){var e=u.icons;if(e)return e[160]||e[80]||e[128]||e[48]||e[Object.keys(e)[0]]}()}),r.onClicked.addListener(function(e){"cj_landing_update_notification"===e&&(b(),r.clear("cj_landing_update_notification"))})}function L(e){_&&(t.onClicked.addListener(b),l&&m(),!0===_&&(t.setBadgeBackgroundColor({color:"#EA4335"}),t.setBadgeText({text:s?"*":"âœµ"}))),o.onUpdateAvailable&&o.onUpdateAvailable(),g<e-i&&C()}function C(){function e(){b(),a.windows.onFocusChanged.removeListener(e),a.tabs.onCreated.removeListener(e)}a.windows.onFocusChanged.addListener(e),a.tabs.onCreated.addListener(e)}a.runtime.setUninstallURL(e+"uninstalled"),a.storage.local.get(["cj_landing_lastupdated","cj_landing_versionnumber"],function(e){var n=Date.now();i=e.cj_landing_lastupdated;var t=e.cj_landing_versionnumber;"string"!=typeof t?v(f):i||(e=y(t),y(d)!==e&&(i=n,a.storage.local.set({cj_landing_lastupdated:n}))),i&&!o.noUpdateNotice&&(o.useNotification&&r?w():_?L(n):C(),o.handleTrigger&&a.runtime.onMessage.addListener(function e(n){n&&"object"===_typeof(n)&&n.cjLandingOpen&&(b(),a.runtime.onMessage.removeListener(e))})),t!==d&&a.storage.local.set({cj_landing_versionnumber:d})})}